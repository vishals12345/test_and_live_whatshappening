!(function($,_undefined){const $ush=window.$ush||{};const ENTER_KEY_CODE=13;function WooCommerce(){const self=this;self.$cart=$('.w-cart');self.$notice=$('.w-wc-notices.woocommerce-notices-wrapper:first',$us.$canvas)
self._activeJqXHR={};self._cartOpened=!1;self._removeProcesses=0;self._events={addToCart:self._addToCart.bind(self),applyCouponCode:self._applyCouponCode.bind(self),changeCartQuantity:self._changeCartQuantity.bind(self),changedFragments:self._changedFragments.bind(self),couponCodeChange:self._couponCodeChange.bind(self),couponDisplaySwitch:self._couponDisplaySwitch.bind(self),enterCouponCode:self._enterCouponCode.bind(self),minusCartQuantity:self._minusCartQuantity.bind(self),moveNotifications:self._moveNotifications.bind(self),outsideClickEvent:self._outsideClickEvent.bind(self),plusCartQuantity:self._plusCartQuantity.bind(self),removeCartItem:self._removeCartItem.bind(self),updateCart:self._updateCart.bind(self),updatedCartTotals:self._updatedCartTotals.bind(self),showLoginForm:self._showLoginForm.bind(self),submitLoginForm:self._submitLoginForm.bind(self),loginFieldKeydown:self._loginFieldKeydown.bind(self)};if(self.isCart()){self.$cartNotification=$('.w-cart-notification',self.$cart);self.$cartNotification.on('click',()=>{self.$cartNotification.fadeOutCSS()});if($.isMobile){self.$cart.on('click','.w-cart-link',(e)=>{if(!self._cartOpened){e.preventDefault();self.$cart.addClass('opened');$us.$body.on('touchstart',self._events.outsideClickEvent)}else{self.$cart.removeClass('opened');$us.$body.off('touchstart',self._events.outsideClickEvent)}
self._cartOpened=!self._cartOpened})}
$us.$body.on('wc_fragments_loaded wc_fragments_refreshed',self._events.changedFragments).on('added_to_cart',self._events.addToCart).on('removed_from_cart',self._events.updateCart)}
if(self.isCartPage()){$us.$body.on('change initControls','input.qty',self._events.changeCartQuantity).on('change','.w-wc-coupon-form input',self._events.couponCodeChange).on('keyup','.w-wc-coupon-form input',self._events.enterCouponCode).on('click','.w-wc-coupon-form button',self._events.applyCouponCode).on('click','a.remove',self._events.removeCartItem).on('click','input.minus',self._events.minusCartQuantity).on('click','input.plus',self._events.plusCartQuantity).on('applied_coupon removed_coupon',self._events.couponDisplaySwitch).on('updated_cart_totals',self._events.updatedCartTotals);$('input.qty',$us.$canvas).trigger('initControls');$.ajaxPrefilter((_,originalOptions,jqXHR)=>{const data=$ush.toString(originalOptions.data);if(data.indexOf('&update_cart')>-1){self._activeJqXHR.updateCart=jqXHR}
if(data.indexOf('&us_calc_shipping')>-1){jqXHR.done((res)=>{$('.w-cart-shipping .woocommerce-shipping-destination').html($('.w-cart-shipping:first .woocommerce-shipping-destination',res).html())})}});$('.w-cart-shipping form.woocommerce-shipping-calculator',$us.$canvas).append('<input type="hidden" name="us_calc_shipping">')}
if(self.isCheckoutPage()){$us.$body.on('change','.w-wc-coupon-form input',self._events.couponCodeChange).on('keyup','.w-wc-coupon-form input',self._events.enterCouponCode).on('click','.w-wc-coupon-form button',self._events.applyCouponCode).on('applied_coupon_in_checkout removed_coupon_in_checkout',self._events.couponDisplaySwitch).on('applied_coupon_in_checkout removed_coupon_in_checkout checkout_error',self._events.moveNotifications).on('click','.w-checkout-login .showlogin',self._events.showLoginForm).on('click','.w-checkout-login button',self._events.submitLoginForm).on('keydown','.w-checkout-login input, .w-checkout-login button',self._events.loginFieldKeydown);let $couponField=$('.w-wc-coupon-form input',$us.$canvas);$us.$document.on('keypress',function(e){if(e.keyCode===ENTER_KEY_CODE&&$couponField.is(':focus')){e.preventDefault()}})}
$us.$document.on('ajaxComplete',(_,jqXHR,settings)=>{if(!$ush.toString(settings.url).includes('wc-ajax=apply_coupon')){return}
const $fragment=$(new DocumentFragment).append(jqXHR.responseText);const $message=$('.woocommerce-error, .woocommerce-message',$fragment);if($message.length){self.$notice.html($message.clone())}else{self.$notice.html('')}})};$.extend(WooCommerce.prototype,{isCart:function(){return!!this.$cart.length},isCartPage:function(){return $us.$body.hasClass('woocommerce-cart')},isCheckoutPage:function(){return $us.$body.hasClass('woocommerce-checkout')},_switchCart:function(){this.$cart.on('focus.upsolution blur.upsolution',(e)=>{$(e.target)[e.type==='focus.upsolution'?'addClass':'removeClass']('opened')})},_updateCart:function(){const self=this;$.each(self.$cart,(_,cart)=>{let $cart=$(cart),$cartQuantity=$('.w-cart-quantity',$cart),miniCartAmount=$('.us_mini_cart_amount:first',$cart).text();if($cart.hasClass('opened')){$cart.removeClass('opened')}
if(miniCartAmount!==_undefined){miniCartAmount=(miniCartAmount+'').match(/\d+/g);$cartQuantity.html(miniCartAmount>0?miniCartAmount:'0');$cart[miniCartAmount>0?'removeClass':'addClass']('empty')}else{let total=0;$('.quantity',$cart).each((_,quantity)=>{let matches=(''+quantity.innerText).match(/\d+/g);if(matches){total+=parseInt(matches[0],10)}});$cartQuantity.html(total>0?total:'0');$cart[total>0?'removeClass':'addClass']('empty')}})},_changedFragments:function(){const self=this;self._updateCart();self._switchCart()},_addToCart:function(e,fragments,_,$button){if($ush.isUndefined(e)){return}
const self=this;self._updateCart();let $notification=self.$cartNotification,$productName=$('.product-name',$notification),productName=$productName.text();productName=$button.closest('.product').find('.woocommerce-loop-product__title').text();$productName.html(productName);$notification.addClass('shown');$notification.on('mouseenter',()=>{$notification.removeClass('shown')});$ush.timeout(()=>{$notification.removeClass('shown').off('mouseenter')},3000)},_outsideClickEvent:function(e){const self=this;if($.contains(self.$cart[0],e.target)){return}
self.$cart.removeClass('opened');$us.$body.off('touchstart',self._events.outsideClickEvent);self._cartOpened=!1},_removeCartItem:function(e){let $item=$(e.target).closest('.cart_item').addClass('change_process');if(!$item.siblings('.cart_item:not(.change_process)').length){$('.w-cart-table',$us.$canvas).remove()}},_changeCartQuantity:function(e){if($us.usbPreview()){return}
const self=this;let $input=$(e.target),max=$ush.parseInt($input.attr('max'))||-1,min=$ush.parseInt($input.attr('min'))||1,value=$ush.parseInt($input.val());if($input.is(':disabled')){return}
if(min>=value){value=min}
if(max>1&&value>=max){value=max}
if(value!=$input.val()){$input.val(value)}
$input.siblings('input.plus:first').prop('disabled',(max>0&&value>=max));$input.siblings('input.minus:first').prop('disabled',(value<=min));if(e.type=='initControls'){return}
$('input[name=us_cart_quantity]',$us.$canvas).val(!0);if(!$('.w-cart-table',$us.$canvas).hasClass('processing')){self.__updateCartForm_long(self._updateCartForm.bind(self))}else{self._updateCartForm()}},_minusCartQuantity:function(e){const self=this;let $target=$(e.target),$input=$target.siblings('input.qty:first');if(!$input.length){return}
const step=$ush.parseInt($input.attr('step')||1);$input.val($ush.parseInt($input.val())-step).trigger('change')},_plusCartQuantity:function(e){const self=this;let $target=$(e.target),$input=$target.siblings('input.qty:first');if(!$input.length){return}
const step=$ush.parseInt($input.attr('step')||1);$input.val($ush.parseInt($input.val())+step).trigger('change')},__updateCartForm_long:$ush.debounce($ush.fn,50),_updateCartForm:function(){const self=this;if(typeof(self._activeJqXHR.updateCart||{}).abort==='function'){self._activeJqXHR.updateCart.abort()}
$('.w-cart-table > button[name=update_cart]',$us.$canvas).removeAttr('disabled').trigger('click')},_updatedCartTotals:function(){const self=this;if(!!self._activeJqXHR.updateCart){self._activeJqXHR.updateCart=_undefined}
let wooElementClasses=['w-cart-shipping','w-cart-table','w-cart-totals','w-checkout-billing','w-checkout-order-review','w-checkout-payment','w-wc-coupon-form',];for(const i in wooElementClasses){$(`.${wooElementClasses[i]}.us_animate_this`,$us.$canvas).removeClass('us_animate_this')}
let $elm=$('.w-cart-shipping .shipping',$us.$canvas);if(!$elm.length){return}
$elm.html($('.w-cart-totals .shipping:first',$us.$canvas).html())},_couponCodeChange:function(e){$('.w-cart-table, form.checkout_coupon:first',$us.$canvas).find('input[name=coupon_code]').val(e.target.value)},_enterCouponCode:function(e){if(e.keyCode===ENTER_KEY_CODE){$(e.target).trigger('change').siblings('button:first').trigger('click')}},_applyCouponCode:function(e){e.stopPropagation();e.preventDefault();$('.w-cart-table, form.checkout_coupon:first',$us.$canvas).find('button[name=apply_coupon]').trigger('click');$(e.target).closest('.w-wc-coupon-form').find('input:first').val('')},_couponDisplaySwitch:function(e){const $coupon=$('.w-wc-coupon-form',$us.$canvas);if(!$coupon.length){return}
if(e.type.indexOf('applied_coupon')>-1&&!$('.woocommerce-error',$us.$canvas).length){$coupon.addClass('coupon_applied')}
if(e.type.indexOf('removed_coupon')>-1&&$('.woocommerce-remove-coupon',$us.$canvas).length<=1){$coupon.removeClass('coupon_applied')}},_moveNotifications:function(e){const self=this;const args=$ush.toArray(arguments);if(!self.$notice.length){let $cartTotals=$('.w-cart-totals',$us.$canvas),$checkoutPayment=$('.w-checkout-payment',$us.$canvas);if(!$cartTotals.length&&!$checkoutPayment.length){return}}
let $message;if(e.type==='checkout_error'&&!!args[1]){$message=$(args[1])}else{$message=$('.woocommerce-error, .woocommerce-message',$us.$canvas)}
if($message.length){self.$notice.html($message.clone())}
$message.remove();if(e.type==='checkout_error'){$('.woocommerce-NoticeGroup-checkout').remove()}},_showLoginForm:function(){$('.woocommerce-form-login').toggleClass('hidden');return!1},_submitLoginForm:function(){const self=this;if(self.isSubmittingLoginForm){return!1}
self.isSubmittingLoginForm=!0;let $formView=$('.w-checkout-login'),$usernameField=$('#us_checkout_login_username',$formView),$passwordField=$('#us_checkout_login_password',$formView),$redirectField=$('#us_checkout_login_redirect',$formView),$nonceField=$('#us_checkout_login_nonce',$formView);if($usernameField.length==0||$passwordField.length==0||$redirectField.length==0||$nonceField.length==0){return!1}
let fields={'login':'Login','rememberme':'forever','username':$usernameField.val(),'password':$passwordField.val(),'redirect':$redirectField.val(),'woocommerce-login-nonce':$nonceField.val(),},$form=$('<form>',{method:'post'});$.each(fields,(key,val)=>{$('<input>').attr({type:"hidden",name:key,value:val}).appendTo($form)});$form.appendTo('body').submit();return!1},_loginFieldKeydown:function(e){if(e.keyCode===ENTER_KEY_CODE){e.stopPropagation();e.preventDefault();this._submitLoginForm()}}});$us.woocommerce=new WooCommerce;function us_wc_variations_image_update(variation){let $slider=$('.w-slider.for_product_image_gallery',$(this).closest('.product')),royalSlider=($slider.data('usImageSlider')||{}).royalSlider;if($ush.isUndefined(royalSlider)){return}
royalSlider.goTo(0);let $image=$('.rsImg',royalSlider.slidesJQ[0]),$thumb=$('.rsThumb:first img',$slider);if(variation===!1){if(!$slider.data('orig-img')){let src=$image.attr('src');$slider.data('orig-img',{src:src,srcset:src,full_src:src,thumb_src:$thumb.attr('srcset'),gallery_thumbnail_src:$thumb.attr('src'),});return}
variation={image:$slider.data('orig-img'),}}
if($.isPlainObject(variation.image)){$image.attr('src',$ush.toString(variation.image.src)).attr('srcset',$ush.toString(variation.image.srcset));$thumb.attr('src',$ush.toString(variation.image.gallery_thumbnail_src)).attr('srcset',$ush.toString(variation.image.thumb_src));$.extend(royalSlider.currSlide,{bigImage:$ush.toString(variation.image.full_src),image:$ush.toString(variation.image.src),});if(typeof royalSlider.updateSliderSize==='function'){royalSlider.updateSliderSize(!0)}}};$(()=>{if($('.w-slider.for_product_image_gallery').length){$ush.timeout(()=>{$.fn.wc_variations_image_update=us_wc_variations_image_update},1)}})})(jQuery)