!(function($,_undefined){var _document=document;const ENTER_KEY_CODE=13;var USWooCommerce=function(){this.$cart=$('.w-cart');this._activeJqXHR={};this._cartOpened=!1;this._removeProcesses=0;this._events={addToCart:this._addToCart.bind(this),applyCouponCode:this._applyCouponCode.bind(this),changeCartQuantity:this._changeCartQuantity.bind(this),changedFragments:this._changedFragments.bind(this),couponCodeChange:this._couponCodeChange.bind(this),couponDisplaySwitch:this._couponDisplaySwitch.bind(this),enterCouponCode:this._enterCouponCode.bind(this),minusCartQuantity:this._minusCartQuantity.bind(this),moveNotifications:this._moveNotifications.bind(this),outsideClickEvent:this._outsideClickEvent.bind(this),plusCartQuantity:this._plusCartQuantity.bind(this),removeCartItem:this._removeCartItem.bind(this),updateCart:this._updateCart.bind(this),updatedCartTotals:this._updatedCartTotals.bind(this),showLoginForm:this._showLoginForm.bind(this),submitLoginForm:this._submitLoginForm.bind(this),loginFieldKeydown:this._loginFieldKeydown.bind(this)};if(this.isCart()){this.$cartNotification=$('.w-cart-notification',this.$cart);this.$cartNotification.on('click',function(){this.$cartNotification.fadeOutCSS()});if($.isMobile){this.$cart.on('click','.w-cart-link',function(e){if(!this._cartOpened){e.preventDefault();this.$cart.addClass('opened');$us.$body.on('touchstart',this._events.outsideClickEvent)}else{this.$cart.removeClass('opened');$us.$body.off('touchstart',this._events.outsideClickEvent)}
this._cartOpened=!this._cartOpened}.bind(this))}
$us.$body.on('wc_fragments_loaded wc_fragments_refreshed',this._events.changedFragments).on('added_to_cart',this._events.addToCart).on('removed_from_cart',this._events.updateCart)}
if(this.isCartPage()){$us.$body.on('change initControls','input.qty',this._events.changeCartQuantity).on('change','.w-wc-coupon-form input',this._events.couponCodeChange).on('keyup','.w-wc-coupon-form input',this._events.enterCouponCode).on('click','.w-wc-coupon-form button',this._events.applyCouponCode).on('click','a.remove',this._events.removeCartItem).on('click','input.minus',this._events.minusCartQuantity).on('click','input.plus',this._events.plusCartQuantity).on('applied_coupon removed_coupon',this._events.couponDisplaySwitch).on('updated_cart_totals',this._events.updatedCartTotals);$('input.qty',$us.$canvas).trigger('initControls');$.ajaxPrefilter(function(_,originalOptions,jqXHR){var data=(''+originalOptions.data);if(data.indexOf('&update_cart')>-1){this._activeJqXHR.updateCart=jqXHR}
if(data.indexOf('&us_calc_shipping')>-1){jqXHR.done(function(res){$('.w-cart-shipping .woocommerce-shipping-destination').html($('.w-cart-shipping:first .woocommerce-shipping-destination',res).html())})}}.bind(this));$('.w-cart-shipping form.woocommerce-shipping-calculator',$us.$canvas).append('<input type="hidden" name="us_calc_shipping">')}
if(this.isCheckoutPage()){$us.$body.on('change','.w-wc-coupon-form input',this._events.couponCodeChange).on('keyup','.w-wc-coupon-form input',this._events.enterCouponCode).on('click','.w-wc-coupon-form button',this._events.applyCouponCode).on('applied_coupon_in_checkout removed_coupon_in_checkout',this._events.couponDisplaySwitch).on('applied_coupon_in_checkout removed_coupon_in_checkout checkout_error',this._events.moveNotifications).on('click','.w-checkout-login .showlogin',this._events.showLoginForm).on('click','.w-checkout-login button',this._events.submitLoginForm).on('keydown','.w-checkout-login input, .w-checkout-login button',this._events.loginFieldKeydown);var $couponField=$('.w-wc-coupon-form input',$us.$canvas);$us.$document.on('keypress',function(e){if(e.keyCode===ENTER_KEY_CODE&&$couponField.is(':focus')){e.preventDefault()}})}};$.extend(USWooCommerce.prototype,{isCart:function(){return!!this.$cart.length},isCartPage:function(){return $us.$body.hasClass('woocommerce-cart')},isCheckoutPage:function(){return $us.$body.hasClass('woocommerce-checkout')},toNumValue:function(value){value=Math.abs(value);return!isNaN(value)?value:0},_switchCart:function(){this.$cart.on('focus.upsolution blur.upsolution',function(e){$(e.target)[e.type==='focus.upsolution'?'addClass':'removeClass']('opened')})},_updateCart:function(){$.each(this.$cart,function(_,cart){var $cart=$(cart),$cartQuantity=$('.w-cart-quantity',$cart),miniCartAmount=$('.us_mini_cart_amount:first',$cart).text();if($cart.hasClass('opened')){$cart.removeClass('opened')}
if(miniCartAmount!==_undefined){miniCartAmount=(miniCartAmount+'').match(/\d+/g);$cartQuantity.html(miniCartAmount>0?miniCartAmount:'0');$cart[miniCartAmount>0?'removeClass':'addClass']('empty')}else{var total=0;$('.quantity',$cart).each(function(_,quantity){var matches=(''+quantity.innerText).match(/\d+/g);if(matches){total+=parseInt(matches[0],10)}});$cartQuantity.html(total>0?total:'0');$cart[total>0?'removeClass':'addClass']('empty')}}.bind(this))},_changedFragments:function(){this._updateCart();this._switchCart()},_addToCart:function(e,fragments,_,$button){if(e===_undefined){return}
this._updateCart();var $notification=this.$cartNotification,$productName=$('.product-name',$notification),productName=$productName.text();productName=$button.closest('.product').find('.woocommerce-loop-product__title').text();$productName.html(productName);$notification.addClass('shown');$notification.on('mouseenter',function(){$notification.removeClass('shown')});$ush.timeout(function(){$notification.removeClass('shown').off('mouseenter')},3000)},_outsideClickEvent:function(e){if($.contains(this.$cart[0],e.target)){return}
this.$cart.removeClass('opened');$us.$body.off('touchstart',this._events.outsideClickEvent);this._cartOpened=!1},_removeCartItem:function(e){var $item=$(e.target).closest('.cart_item').addClass('change_process');if(!$item.siblings('.cart_item:not(.change_process)').length){$('.w-cart-table',$us.$canvas).remove()}},_changeCartQuantity:function(e){if($us.usbPreview()){return}
var $input=$(e.target),max=(this.toNumValue($input.attr('max'))||-1),min=(this.toNumValue($input.attr('min'))||1),value=this.toNumValue($input.val());if($input.is(':disabled')){return}
if(min>=value){value=min}
if(max>1&&value>=max){value=max}
if(value!=$input.val()){$input.val(value)}
$input.siblings('input.plus:first').prop('disabled',(max>0&&value>=max));$input.siblings('input.minus:first').prop('disabled',(value<=min));if(e.type=='initControls'){return}
$('input[name=us_cart_quantity]',$us.$canvas).val(!0);if(!$('.w-cart-table',$us.$canvas).hasClass('processing')){this.__updateCartForm_long(this._updateCartForm.bind(this))}else{this._updateCartForm()}},_minusCartQuantity:function(e){var $target=$(e.target),$input=$target.siblings('input.qty:first');if(!$input.length){return}
var step=this.toNumValue($input.attr('step')||1);$input.val(this.toNumValue($input.val())-step).trigger('change')},_plusCartQuantity:function(e){var $target=$(e.target),$input=$target.siblings('input.qty:first');if(!$input.length){return}
var step=this.toNumValue($input.attr('step')||1);$input.val(this.toNumValue($input.val())+step).trigger('change')},__updateCartForm_long:$ush.debounce($ush.fn,50),_updateCartForm:function(){if($.isFunction((this._activeJqXHR.updateCart||{}).abort)){this._activeJqXHR.updateCart.abort()}
$('.w-cart-table > button[name=update_cart]',$us.$canvas).removeAttr('disabled').trigger('click')},_updatedCartTotals:function(){if(!!this._activeJqXHR.updateCart){this._activeJqXHR.updateCart=_undefined}
var wooElementClasses=['w-cart-shipping','w-cart-table','w-cart-totals','w-checkout-billing','w-checkout-order-review','w-checkout-payment','w-wc-coupon-form',];for(var i in wooElementClasses){$('.'+wooElementClasses[i]+'.us_animate_this',$us.$canvas).removeClass('us_animate_this')}
var $elm=$('.w-cart-shipping .shipping',$us.$canvas);if(!$elm.length){return}
$elm.html($('.w-cart-totals .shipping:first',$us.$canvas).html())},_couponCodeChange:function(e){$('.w-cart-table, form.checkout_coupon',$us.$canvas).find('input[name=coupon_code]').val(e.target.value)},_enterCouponCode:function(e){if(e.keyCode===ENTER_KEY_CODE){$(e.target).trigger('change').siblings('button:first').trigger('click')}},_applyCouponCode:function(e){e.stopPropagation();e.preventDefault();$('.w-cart-table, form.checkout_coupon',$us.$canvas).find('button[name=apply_coupon]').trigger('click');$(e.target).closest('.w-wc-coupon-form').find('input:first').val('')},_couponDisplaySwitch:function(e){var $coupon=$('.w-wc-coupon-form',$us.$canvas);if(!$coupon.length){return}
if(e.type.indexOf('applied_coupon')>-1&&!$('.woocommerce-error',$us.$canvas).length){$coupon.addClass('coupon_applied')}
if(e.type.indexOf('removed_coupon')>-1&&$('.woocommerce-remove-coupon',$us.$canvas).length<=1){$coupon.removeClass('coupon_applied')}},_moveNotifications:function(e){var $wcNotices=$('.w-wc-notices.woocommerce-notices-wrapper:first',$us.$canvas),args=arguments;if(!$wcNotices.length){var $cartTotals=$('.w-cart-totals',$us.$canvas),$checkoutPayment=$('.w-checkout-payment',$us.$canvas);if(!$cartTotals.length&&!$checkoutPayment.length){return}}
var $message;if(e.type==='checkout_error'&&!!args[1]){$message=$(args[1])}else{$message=$('.woocommerce-error, .woocommerce-message',$us.$canvas)}
if($message.length){$wcNotices.html($message.clone())}
$message.remove();if(e.type==='checkout_error'){$('.woocommerce-NoticeGroup-checkout').remove()}},_showLoginForm:function(){$('.woocommerce-form-login').toggleClass('hidden');return!1},_submitLoginForm:function(){if(this.isSubmittingLoginForm){return!1}
this.isSubmittingLoginForm=!0;var $formView=$('.w-checkout-login'),$usernameField=$formView.find('#us_checkout_login_username'),$passwordField=$formView.find('#us_checkout_login_password'),$redirectField=$formView.find('#us_checkout_login_redirect'),$nonceField=$formView.find('#us_checkout_login_nonce');if($usernameField.length==0||$passwordField.length==0||$redirectField.length==0||$nonceField.length==0){return!1}
var fields={'login':'Login','rememberme':'forever','username':$usernameField.val(),'password':$passwordField.val(),'redirect':$redirectField.val(),'woocommerce-login-nonce':$nonceField.val(),},$form=$('<form>',{method:'post'});$.each(fields,function(key,val){$('<input>').attr({type:"hidden",name:key,value:val}).appendTo($form)});$form.appendTo('body').submit();return!1},_loginFieldKeydown:function(e){if(e.keyCode===ENTER_KEY_CODE){e.stopPropagation();e.preventDefault();this._submitLoginForm()}}});new USWooCommerce()})(jQuery)