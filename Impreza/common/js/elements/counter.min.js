!function($,undefined){var
_parseFloat=parseFloat,_parseInt=parseInt,_undefined=undefined,_window=window
var USCounterNumber=function(container){var self=this;self.$container=$(container);self.initialString=self.$container.html()+'';self.finalString=self.$container.data('final')+'';self.format=self.getFormat(self.initialString,self.finalString);if(self.format.decMark){var pattern=new RegExp('[^0-9\/'+self.format.decMark+']+','g');self.initial=_parseFloat(self.initialString.replace(pattern,'').replace(self.format.decMark,'.'));self.final=_parseFloat(self.finalString.replace(pattern,'').replace(self.format.decMark,'.'))}else{self.initial=_parseInt(self.initialString.replace(/[^0-9]+/g,''));self.final=_parseInt(self.finalString.replace(/[^0-9]+/g,''))}
if(self.format.accounting){if(self.initialString.length>0&&self.initialString[0]=='('){self.initial=-self.initial}
if(self.finalString.length>0&&self.finalString[0]=='('){self.final=-self.final}}};USCounterNumber.prototype={step:function(now){var self=this,value=(1-now)*self.initial+self.final*now,intPart=Math[self.format.decMark?'floor':'round'](value).toString(),result='';if(self.format.zerofill){var amountOfZeros=(self.format.intDigits-intPart.length);if(amountOfZeros>0){intPart='0'.repeat(amountOfZeros)+intPart}}
if(self.format.groupMark){if(self.format.indian){result+=intPart.replace(/(\d)(?=(\d\d)+\d$)/g,'$1'+self.format.groupMark)}else{result+=intPart.replace(/\B(?=(\d{3})+(?!\d))/g,self.format.groupMark)}}else{result+=intPart}
if(self.format.decMark){var decimalPart=(value%1).toFixed(self.format.decDigits).substring(2);result+=self.format.decMark+decimalPart}
if(self.format.accounting&&result.length>0&&result[0]=='-'){result='('+result.substring(1)+')'}
self.$container.html(result)},getFormat:function(initial,final){var self=this,iFormat=self._getFormat(initial),fFormat=self._getFormat(final),format=$.extend({},iFormat,fFormat);if(format.groupMark==format.decMark){delete format.groupMark}
return format},_getFormat:function(str){var marks=str.replace(/[0-9\(\)\-]+/g,''),format={};if(str.charAt(0)=='('){format.accounting=!0}
if(/^0[0-9]/.test(str)){format.zerofill=!0}
str=str.replace(/[\(\)\-]/g,'');if(marks.length!=0){if(marks.length>1){format.groupMark=marks.charAt(0);if(marks.charAt(0)!=marks.charAt(marks.length-1)){format.decMark=marks.charAt(marks.length-1)}
if(str.split(format.groupMark).length>2&&str.split(format.groupMark)[1].length==2){format.indian=!0}}else{format[(((str.length-1)-str.indexOf(marks))==3&&marks!=='.')?'groupMark':'decMark']=marks}
if(format.decMark){format.decDigits=str.length-str.indexOf(format.decMark)-1}}
if(format.zerofill){format.intDigits=str.replace(/[^\d]+/g,'').length-(format.decDigits||0)}
return format}};var USCounterText=function(container){var self=this;self.$container=$(container);self.initial=self.$container.text()+'';self.final=self.$container.data('final')+'';self.partsStates=self.getStates(self.initial,self.final);self.len=1/(self.partsStates.length-1);self.curState=0};USCounterText.prototype={step:function(now){var self=this,state=Math.round(Math.max(0,now/self.len));if(state==self.curState){return}
self.$container.html(self.partsStates[state]);self.curState=state},getStates:function(initial,final){var min=Math.min,dist=[],i,j;for(i=0;i<=initial.length;i ++){dist[i]=[i]}
for(j=1;j<=final.length;j ++){dist[0][j]=j;for(i=1;i<=initial.length;i ++){dist[i][j]=(initial[i-1]===final[j-1])?dist[i-1][j-1]:(Math.min(dist[i-1][j],dist[i][j-1],dist[i-1][j-1])+1)}}
var states=[final];for(i=initial.length,j=final.length;i>0||j>0;i --,j --){var min=dist[i][j];if(i>0){min=Math.min(min,dist[i-1][j],(j>0)?dist[i-1][j-1]:min)}
if(j>0){min=Math.min(min,dist[i][j-1])}
if(min>=dist[i][j]){continue}
if(min==dist[i][j-1]){states.unshift(states[0].substring(0,j-1)+states[0].substring(j));i ++}else if(min==dist[i-1][j-1]){states.unshift(states[0].substring(0,j-1)+initial[i-1]+states[0].substring(j))}else if(min==dist[i-1][j]){states.unshift(states[0].substring(0,j)+initial[i-1]+states[0].substring(j));j ++}}
return states}};var USCounter=function(container){var self=this;self.$container=$(container);self.parts=[];self.duration=_parseFloat(self.$container.data('duration')||2)*1000;self.$container.find('.w-counter-value-part').each(function(index,part){var $part=$(part);if($part.html()+''==$part.data('final')+''){return}
var type=$part.usMod('type');if(type=='number'){self.parts.push(new USCounterNumber($part))}else{self.parts.push(new USCounterText($part))}});if(_window.$us!==_undefined&&_window.$us.scroll!==_undefined){$us.waypoints.add(self.$container,'15%',self.animate.bind(self))}else{self.animate()}};USCounter.prototype={animate:function(duration){var self=this;self.$container.css('w-counter',0).animate({'w-counter':1},{duration:self.duration,step:self.step.bind(self)})},step:function(now){var self=this;for(var i=0;i<self.parts.length;i ++){self.parts[i].step(now)}}};$.fn.wCounter=function(options){return this.each(function(){var self=this;$(self).data('wCounter',new USCounter(self,options))})};$(function(){$('.w-counter').wCounter()})}(jQuery)