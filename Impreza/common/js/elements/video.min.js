(function($,undefined){window.$us.YTPlayers=window.$us.YTPlayers||{};"use strict";$us.wVideo=function(container){var self=this;self.$container=$(container);self.$videoH=$('.w-video-h',self.$container);self.$videoTag='';self.cookieName=self.$container.data('cookie-name');self.isWithOverlay=self.$container.hasClass('with_overlay');if(!self.cookieName&&!self.isWithOverlay){return}
self.data={};if(self.$container.is('[onclick]')){self.data=self.$container[0].onclick()||{};if(!$us.usbPreview())self.$container.removeAttr('onclick')}
self._events={hideOverlay:self._hideOverlay.bind(self),confirm:self._confirm.bind(self)};if(self.cookieName){self.$container.on('click','.action_confirm_load',self._events.confirm)}
self.$container.one('click','> *',self._events.hideOverlay)};$.extend($us.wVideo.prototype,{_confirm:function(){var self=this;if($('input[name^='+self.cookieName+']:checked',self.$container).length){$ush.setCookie(self.cookieName,1,365)}
if(self.isWithOverlay){self.insertPlayer()}else{self.$videoH.html($ush.base64Decode(''+$('script[type="text/template"]',self.$container).text())).removeAttr('data-cookie-name')}},_hideOverlay:function(e){e.preventDefault();var self=this;if(self.$container.is('.with_overlay')){self.$container.removeAttr('style').removeClass('with_overlay')}
if(!self.cookieName){self.insertPlayer()}},insertPlayer:function(){var self=this,data=$.extend({player_id:'',player_api:'',player_html:''},self.data||{});if(data.player_api&&!$('script[src="'+data.player_api+'"]',document.head).length){$('head').append('<script src="'+data.player_api+'"></script>')}
self.$videoH.html(data.player_html);self.$videoTag=self.getVideo();if(!data.player_api&&self.$videoTag){if(self.isWithOverlay&&$ush.isSafari&&/(iPhone|iPod|iPad)/i.test(navigator.platform)){self.$videoTag.setAttribute('preload','metadata')}
self.$videoTag.play()}},getVideo:function(){return this.$videoH.find('video')[0]||!1}});$.fn.wVideo=function(options){return this.each(function(){$(this).data('wVideo',new $us.wVideo(this,options))})};$(function(){$('.w-video').wVideo()})})(jQuery)